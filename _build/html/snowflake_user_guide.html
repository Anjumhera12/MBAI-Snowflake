<!doctype html>
<html class="no-js" lang="en" data-content_root="./">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="index" title="Index" href="genindex.html" /><link rel="search" title="Search" href="search.html" /><link rel="prev" title="Snowflake documentation" href="index.html" />

    <!-- Generated with Sphinx 8.2.3 and Furo 2024.08.06 -->
        <title>Introduction - Snowflake documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=8f2a1f02" />
    <link rel="stylesheet" type="text/css" href="_static/styles/furo.css?v=354aac6f" />
    <link rel="stylesheet" type="text/css" href="_static/styles/furo-extensions.css?v=302659d7" />
    
    


<style>
  body {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-with-moon" viewBox="0 0 24 24">
    <title>Auto light/dark, in light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path style="opacity: 50%" d="M 5.411 14.504 C 5.471 14.504 5.532 14.504 5.591 14.504 C 3.639 16.319 4.383 19.569 6.931 20.352 C 7.693 20.586 8.512 20.551 9.25 20.252 C 8.023 23.207 4.056 23.725 2.11 21.184 C 0.166 18.642 1.702 14.949 4.874 14.536 C 5.051 14.512 5.231 14.5 5.411 14.5 L 5.411 14.504 Z"/>
      <line x1="14.5" y1="3.25" x2="14.5" y2="1.25"/>
      <line x1="14.5" y1="15.85" x2="14.5" y2="17.85"/>
      <line x1="10.044" y1="5.094" x2="8.63" y2="3.68"/>
      <line x1="19" y1="14.05" x2="20.414" y2="15.464"/>
      <line x1="8.2" y1="9.55" x2="6.2" y2="9.55"/>
      <line x1="20.8" y1="9.55" x2="22.8" y2="9.55"/>
      <line x1="10.044" y1="14.006" x2="8.63" y2="15.42"/>
      <line x1="19" y1="5.05" x2="20.414" y2="3.636"/>
      <circle cx="14.5" cy="9.55" r="3.6"/>
    </svg>
  </symbol>
  <symbol id="svg-moon-with-sun" viewBox="0 0 24 24">
    <title>Auto light/dark, in dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path d="M 8.282 7.007 C 8.385 7.007 8.494 7.007 8.595 7.007 C 5.18 10.184 6.481 15.869 10.942 17.24 C 12.275 17.648 13.706 17.589 15 17.066 C 12.851 22.236 5.91 23.143 2.505 18.696 C -0.897 14.249 1.791 7.786 7.342 7.063 C 7.652 7.021 7.965 7 8.282 7 L 8.282 7.007 Z"/>
      <line style="opacity: 50%" x1="18" y1="3.705" x2="18" y2="2.5"/>
      <line style="opacity: 50%" x1="18" y1="11.295" x2="18" y2="12.5"/>
      <line style="opacity: 50%" x1="15.316" y1="4.816" x2="14.464" y2="3.964"/>
      <line style="opacity: 50%" x1="20.711" y1="10.212" x2="21.563" y2="11.063"/>
      <line style="opacity: 50%" x1="14.205" y1="7.5" x2="13.001" y2="7.5"/>
      <line style="opacity: 50%" x1="21.795" y1="7.5" x2="23" y2="7.5"/>
      <line style="opacity: 50%" x1="15.316" y1="10.184" x2="14.464" y2="11.036"/>
      <line style="opacity: 50%" x1="20.711" y1="4.789" x2="21.563" y2="3.937"/>
      <circle style="opacity: 50%" cx="18" cy="7.5" r="2.169"/>
    </svg>
  </symbol>
  <symbol id="svg-pencil" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-pencil-code">
      <path d="M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4" />
      <path d="M13.5 6.5l4 4" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
  <symbol id="svg-eye" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-eye-code">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0" />
      <path
        d="M11.11 17.958c-3.209 -.307 -5.91 -2.293 -8.11 -5.958c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6c-.21 .352 -.427 .688 -.647 1.008" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>

<a class="skip-to-content muted-link" href="#furo-main-content">Skip to content</a>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="index.html"><div class="brand">Snowflake  documentation</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
          <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="index.html">
  
  
  <span class="sidebar-brand-text">Snowflake  documentation</span>
  
</a><form class="sidebar-search-container" method="get" action="search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current current-page"><a class="current reference internal" href="#">Introduction</a></li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          <div class="view-this-page">
  <a class="muted-link" href="_sources/snowflake_user_guide.rst.txt" title="View this page">
    <svg><use href="#svg-eye"></use></svg>
    <span class="visually-hidden">View this page</span>
  </a>
</div>
<div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
              <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main" id="furo-main-content">
          <section id="introduction">
<h1>Introduction<a class="headerlink" href="#introduction" title="Link to this heading">¶</a></h1>
<p>The objective of this document is to provide a structured <strong>user and implementation guide</strong> for <strong>Matchbook AI’s Snowflake Connector</strong>, covering both <strong>business users</strong> and <strong>IT administrators</strong>. Connectors enable existing Snowflake customers to seamlessly integrate Matchbook AI’s cleanse, match, enrich, and monitor APIs into their environment. This empowers users to streamline data transformation and enrichment workflows without leaving their existing platform.</p>
<ol class="arabic simple">
<li><p><strong>Guide Users in Data Management</strong> – Help business users navigate Matchbook AI, manage source data, and download matched records.</p></li>
<li><p><strong>Assist with Technical Implementation</strong> – Provide IT teams with clear instructions on setting up, configuring, and optimizing Matchbook AI within Snowflake and Data Sharing.</p></li>
</ol>
<p><strong>Benefits</strong>:</p>
<ul class="simple">
<li><p><strong>Snowflake</strong> can act as the <strong>data ingestion point for D&amp;B</strong>, enabling advanced data cleansing, <strong>real-time matching</strong>, and enrichment without requiring users to switch between multiple tools or platforms.</p></li>
<li><p>Improves the efficiency of data pipelines, reduces <strong>decision-making latency</strong>, and <strong>lowers the manual costs associated with data processing</strong>.</p></li>
<li><p>Empowers customers to proactively manage their data to adapt to changes in business KPIs.</p></li>
<li><p>Enables <strong>real-time monitoring</strong> of data to ensure accuracy and relevance.</p></li>
<li><p>Eliminates issues related to inaccurate data, outdated information, and data silos.</p></li>
</ul>
<section id="user-guide">
<h2>1. User Guide<a class="headerlink" href="#user-guide" title="Link to this heading">¶</a></h2>
<p>This guide provides business users and IT administrators with a structured approach to integrating Matchbook AI’s cleanse, match, enrich, and monitor APIs within Snowflake. It helps business users navigate Matchbook AI, manage source data, and download matched records.</p>
<section id="log-in-to-snowflake">
<h3>1.1 Log in to Snowflake<a class="headerlink" href="#log-in-to-snowflake" title="Link to this heading">¶</a></h3>
<p>Navigate to your Snowflake account using the provided URL: <a class="reference external" href="https://app.snowflake.com/matchbook/dev/#/homepage">https://app.snowflake.com/matchbook/dev/#/homepage</a></p>
<figure class="align-default">
<img alt="_images/1.png" src="_images/1.png" />
</figure>
</section>
<section id="access-snowflake-account-for-individual">
<h3>1.2 Access Snowflake account for individual<a class="headerlink" href="#access-snowflake-account-for-individual" title="Link to this heading">¶</a></h3>
<p>Each user has unique login credentials. Log in using your assigned <strong>username</strong> and <strong>password</strong>.</p>
<figure class="align-default">
<img alt="_images/2.png" src="_images/2.png" />
</figure>
<p>Once logged in, you will be directed to the <strong>Snowflake console dashboard</strong>.</p>
<figure class="align-default">
<img alt="_images/3.png" src="_images/3.png" />
</figure>
</section>
<section id="setting-up-the-database-and-schema">
<h3>1.3 Setting Up the Database and Schema<a class="headerlink" href="#setting-up-the-database-and-schema" title="Link to this heading">¶</a></h3>
<section id="creating-database-and-schema">
<h4>Creating Database and Schema<a class="headerlink" href="#creating-database-and-schema" title="Link to this heading">¶</a></h4>
<p>From the left side menu, go to ‘<strong>Data</strong>’ and select ‘<strong>Databases</strong>’, then click on ‘<strong>+ Database</strong>’ to create a new one.</p>
<figure class="align-default">
<img alt="_images/4.png" src="_images/4.png" />
</figure>
<p>A pop-up window will appear. Enter a name for the database and a comment (optional), then click ‘<strong>Create</strong>’.</p>
<figure class="align-default">
<img alt="_images/5.png" src="_images/5.png" />
</figure>
<p>Once the database is created, it will appear on the left-hand side. Click on the name of the database you created, then click on ‘<strong>+ Schema</strong>’.</p>
<figure class="align-default">
<img alt="_images/6.png" src="_images/6.png" />
</figure>
<p>A pop-up window will appear. Enter the name for the schema and a comment (optional), then click ‘<strong>Create</strong>’ to create the schema.</p>
<figure class="align-default">
<img alt="_images/7.png" src="_images/7.png" />
</figure>
</section>
</section>
<section id="creating-worksheets">
<h3>1.4 Creating Worksheets<a class="headerlink" href="#creating-worksheets" title="Link to this heading">¶</a></h3>
<section id="create-separate-worksheet">
<h4>Create Separate worksheet<a class="headerlink" href="#create-separate-worksheet" title="Link to this heading">¶</a></h4>
<p>A separate worksheet should be created for each client to share their data and results. To create a worksheet, on the dashboard, select <strong>Worksheets</strong> and click on <strong>Go to Worksheets</strong>.</p>
<p>(or) from the left-hand menu, select <strong>Projects</strong> -&gt; <strong>Worksheets</strong>.</p>
<figure class="align-default">
<img alt="_images/8.png" src="_images/8.png" />
</figure>
<p>You will be redirected to a new page, select <strong>SQL Worksheet</strong> from the drop-down menu.</p>
<figure class="align-default">
<img alt="_images/9.png" src="_images/9.png" />
</figure>
</section>
<section id="configuring-database-and-schema">
<h4>Configuring Database and Schema<a class="headerlink" href="#configuring-database-and-schema" title="Link to this heading">¶</a></h4>
<p>Once you select the SQL Worksheet, a new page opens.</p>
<p><strong>Select the Role and Virtual Warehouse</strong>:</p>
<p>Click on the dot icon as shown in the screen below.</p>
<figure class="align-default">
<img alt="_images/10.png" src="_images/10.png" />
</figure>
<p>As each worksheet can access only the allowed databases, select the <strong>Role</strong> and <strong>Virtual Warehouse</strong>, as shown below.</p>
<figure class="align-default">
<img alt="_images/11.png" src="_images/11.png" />
</figure>
<p><strong>Use case</strong>: Suppose a client wants to log in using the <strong>DATAENGINEER</strong> role and execute code with a <strong>Medium</strong> warehouse size. In this case, they should select the appropriate <strong>Role</strong> and <strong>Virtual Warehouse</strong> as demonstrated above.</p>
<p>Role: DATAENGINEER</p>
<p>Run on warehouse: DEVELOPER_MEDIUM</p>
<p><strong>Select Database and Schema</strong>:</p>
<p>Select the database and schema by clicking on <strong>No Database selected</strong> drop-down menu as shown in the screen below.</p>
<figure class="align-default">
<img alt="_images/12.png" src="_images/12.png" />
</figure>
<p><strong>Note</strong>: <em>Only the specified database and schema will have execution access unless explicit permissions are granted to other databases and schemas.</em></p>
<p><strong>Use case</strong>: Select the database and schema as shown in the screen below. Here, SNOWFLAKE CONNECTOR is selected as database and SFCONNECTOR is selected as schema.</p>
<figure class="align-default">
<img alt="_images/13.png" src="_images/13.png" />
</figure>
<p><strong>Note</strong>: <em>Once the worksheet is created, it will appear on the dashboard.</em></p>
<p>Once the user opens a new worksheet and selects the appropriate database and schema, they need to execute the shared SQL scripts one by one. These scripts grant the necessary permissions required for the Snowflake app or the logged-in user to run the connector process.</p>
<p>The first script to be executed is the <strong>initialization script</strong>.</p>
<p>Running this script creates an egress network rule, which is needed to whitelist the MBAI server URL.</p>
<figure class="align-default">
<img alt="_images/14.png" src="_images/14.png" />
</figure>
<p>It also creates the secret store table where the information required for calling MBAI APIs is stored.</p>
<figure class="align-default">
<img alt="_images/15.png" src="_images/15.png" />
</figure>
<p>To create a table, click on the schema you created, then click on the ‘<strong>Create</strong>’ dropdown menu.</p>
<figure class="align-default">
<img alt="_images/16.png" src="_images/16.png" />
</figure>
<p>From the menu, select ‘<strong>Table</strong>’ and choose ‘<strong>From File</strong>’.</p>
<figure class="align-default">
<img alt="_images/17.png" src="_images/17.png" />
</figure>
</section>
<section id="adding-source-data-assets">
<h4>Adding source data assets<a class="headerlink" href="#adding-source-data-assets" title="Link to this heading">¶</a></h4>
<p>A pop-up window opens to select a warehouse.</p>
<p><strong>Use case</strong>: Here, DEVELOPER MEDIUM is selected.</p>
<p>After selecting the warehouse, a pop-up window will appear. Import input data using <strong>CSV</strong> or <strong>Excel</strong> files by clicking on <strong>Browse</strong>. Select the database, schema, and table, and provide a name for the file you are uploading. Then, click ‘<strong>Next</strong>’.</p>
<figure class="align-default">
<img alt="_images/18.png" src="_images/18.png" />
</figure>
<p>After clicking on <strong>Next</strong>, it takes few seconds to load data into table. Ensure all required columns are correctly populated with metadata. Click <strong>Load</strong> data to table to complete the process.</p>
<figure class="align-default">
<img alt="_images/19.png" src="_images/19.png" />
</figure>
<p>A success message is displayed after the data is loaded.</p>
<figure class="align-default">
<img alt="_images/20.png" src="_images/20.png" />
</figure>
<p><strong>Note</strong>:</p>
<ul class="simple">
<li><p><em>Clicking on ‘Query Data’ opens a new worksheet</em>.</p></li>
</ul>
<blockquote>
<div><ul class="simple">
<li><p><em>Clicking on ‘Done’ closes the pop-up, and you can then create a worksheet from the dashboard</em>.</p></li>
</ul>
</div></blockquote>
<p>After this, the remaining scripts should be executed one by one. It is recommended to create separate worksheets for each script to be executed.</p>
<figure class="align-default">
<img alt="_images/21.png" src="_images/21.png" />
</figure>
<p>The table below includes the scripts.</p>
<p>DROP TABLE IF EXISTS SNOWFLAKECONNECTOR.SFCONNECTOR.BUSINESS_ENTITIES_INPUTS_KULDIP;
DROP TABLE IF EXISTS SNOWFLAKECONNECTOR.FINAL_SCHEMA.MATCH_MATCHOUTPUT_KULDIP;
DROP TABLE IF EXISTS SNOWFLAKECONNECTOR.FINAL_SCHEMA.MATCH_ENRICHMENT_KULDIP;</p>
<blockquote>
<div><p>DROP TABLE IF EXISTS SNOWFLAKECONNECTOR.FINAL_SCHEMA.STG_KULDIP;</p>
</div></blockquote>
<p>Call MATCHBOOK_MAINSCRIPT (‘SNOWFLAKE_DEV’,’SFCONNECTOR’,’AAAA’,’FINAL_SCHEMA’,’MATCHOUTPUT_AAAA’,50,’[SRC::Demo]’);
call matchbook_enrichmentscript(‘SNOWFLAKE_DEV’, ‘FINAL_SCHEMA’, ‘MATCHOUTPUT_DB_147_TESTING_070401’, ‘FINAL_SCHEMA’, ‘ENRICHMENT_DB_147_TESTING_070401’, 50, ‘[“Firmographics”]’);
call downloadmatcheddata(‘SNOWFLAKE_DEV’,’FINAL_SCHEMA’,’STG_KULDIP’,’FINAL_SCHEMA’,’MATCHOUTPUT_DB_147_TESTING_070401’,10,’[SRC::Demo]’);</p>
<p>Select * from “SNOWFLAKECONNECTOR”.”FINAL_SCHEN”.”SNOWFLAKE_DEV_MATCHOUTPUT_DB_147_TESTING_070401”;</p>
<p><strong>Note</strong>: If we need to re-import the worksheet or deploy a new version of the code, we use ‘<em>DROP TABLE</em>’ and perform cleanup.</p>
<ul class="simple">
<li><p><strong>CALL MATCHBOOK_MAINSCRIPT</strong>: Runs the main Matchbook workflow to cleanse, match, and process your source data.</p></li>
</ul>
<blockquote>
<div><p>This is the primary script to kick off the end-to-end data pipeline.</p>
</div></blockquote>
<ul class="simple">
<li><p><strong>CALL MATCHBOOK_ENRICHMENTSCRIPT</strong>: Enriches matched records with additional attributes like firmographics from D&amp;B.</p></li>
</ul>
<blockquote>
<div><p>Use this after matching to add more context and value to your data.</p>
</div></blockquote>
<ul class="simple">
<li><p><strong>CALL DOWNLOADMATCHEDDATA</strong>: Exports the final set of matched and enriched records from Snowflake.</p></li>
</ul>
<p>Use this to retrieve your processed data for reporting or downstream use.</p>
<p>As the user runs these scripts, they trigger specific stored procedures and functions that Snowflake uses to connect to the MBAI server and retrieve the required data for various tasks.</p>
<p>Here is an example of how it looks:</p>
<p><strong>Procedures</strong>:</p>
<figure class="align-default">
<img alt="_images/22.png" src="_images/22.png" />
</figure>
<p><strong>Functions</strong>:</p>
<figure class="align-default">
<img alt="_images/23.png" src="_images/23.png" />
</figure>
<p>Inside the stage folder, the supporting Python scripts need to be imported. These scripts contain supporting functions for calling the MBAI APIs. They are used within the procedures and functions defined in the SQL scripts.</p>
</section>
</section>
<section id="deploying-scripts-and-sharing-data-in-snowflake">
<h3>1.5 Deploying Scripts and Sharing Data in Snowflake<a class="headerlink" href="#deploying-scripts-and-sharing-data-in-snowflake" title="Link to this heading">¶</a></h3>
<p><strong>Script Deployment</strong></p>
<ol class="arabic simple">
<li><p>Deploy all three scripts in the Snowflake environment using the correct <strong>Role</strong>, <strong>Database</strong>, and <strong>Schema</strong> as shown.</p></li>
<li><p>Run the procedure in your worksheet. Once successfully created, a confirmation message will appear in the <strong>Snowflake message box</strong>.</p></li>
</ol>
<figure class="align-default">
<img alt="_images/24.png" src="_images/24.png" />
</figure>
<p><strong>Data Sharing Process</strong></p>
<ol class="arabic simple">
<li><p>User Data Sharing</p></li>
</ol>
<blockquote>
<div><ol class="loweralpha simple">
<li><p>Users share <strong>sample data</strong>, identified by a <strong>client ID</strong> (e.g., MBQA1).</p></li>
<li><p>Data is available within a <strong>specific schema</strong>, allowing users to share either the <strong>schema</strong> or <strong>table</strong>.</p></li>
</ol>
</div></blockquote>
<ol class="arabic simple" start="2">
<li><p>Granting Access</p></li>
</ol>
<blockquote>
<div><ol class="loweralpha simple">
<li><p>Perform the <strong>grant share</strong> action to provide access to the recipient.</p></li>
<li><p>Verify the recipient and confirm that <strong>Matchbook AI</strong> has access to the shared data.</p></li>
</ol>
</div></blockquote>
<ol class="arabic simple" start="3">
<li><p>Process Establishment</p></li>
</ol>
<blockquote>
<div><ol class="loweralpha simple">
<li><p>Customer Responsibilities: Follow the outlined steps to share data via <strong>Delta Sharing</strong>.</p></li>
<li><p>Our Responsibilities: Configure processes and setups based on the shared data.</p></li>
</ol>
</div></blockquote>
<ol class="arabic simple" start="4">
<li><p>Process Configuration</p></li>
</ol>
<blockquote>
<div><ol class="loweralpha simple">
<li><p>Job Creation: Set up scripts for <strong>cleanse, match, classify, enrich, and refresh</strong>.</p></li>
<li><p>Configure <strong>job settings</strong> and <strong>parameters</strong> accordingly.</p></li>
<li><p>Start by configuring the <strong>share name</strong> in the <strong>Cleanse Match</strong> job.</p></li>
</ol>
</div></blockquote>
<p><strong>Note</strong>: This sharing process is manual. Our system will automatically generate a <strong>Database</strong> linked to your <strong>client ID</strong>, ensuring seamless access. Each client will have a unique identifier.</p>
<p><strong>Viewing Shared Tables</strong></p>
<p>To view the tables shared with you, follow these steps:</p>
<section id="managing-the-key-vault">
<h4>1.5.1 Managing the key vault<a class="headerlink" href="#managing-the-key-vault" title="Link to this heading">¶</a></h4>
<ul class="simple">
<li><p>Snowflake does not support adding secrets through a standard user account. Instead, secrets must be managed by an <strong>authorized user</strong>.</p></li>
<li><p>Secrets can be organized within a <strong>secret store</strong>, where each store is dedicated to a specific client. For example, we establish <strong>client-specific scopes</strong> to manage API keys and secrets securely.</p></li>
<li><p>To demonstrate, we can <strong>list the secrets</strong> within a secret store by specifying the <strong>client’s name</strong> as the secret store. Within this store, we can manage and update various credentials, such as <strong>tokens, API keys, and other sensitive data</strong>.</p></li>
</ul>
</section>
<section id="managing-auth-token">
<h4>1.5.2 Managing Auth token<a class="headerlink" href="#managing-auth-token" title="Link to this heading">¶</a></h4>
<ul class="simple">
<li><p>The authentication token is used to <strong>automate specific processes</strong>, such as triggering the <strong>enrichment data process</strong>. To achieve this, we make calls to the <strong>Snowflake REST API</strong>.</p></li>
<li><p>This token is <strong>generated directly from Snowflake</strong> and is specific to the <strong>Snowflake database</strong>, not our own system. It is solely used to <strong>authenticate and trigger Snowflake API calls</strong> for process execution.</p></li>
</ul>
</section>
<section id="retrieving-the-token-for-the-client">
<h4>1.5.3 Retrieving the Token for the Client<a class="headerlink" href="#retrieving-the-token-for-the-client" title="Link to this heading">¶</a></h4>
<p>Each script <strong>generates a token at the beginning</strong>, which is then <strong>used throughout the execution</strong> to avoid multiple token generations. A <strong>new token is only created if the existing one expires</strong>, ensuring efficient token management and reducing unnecessary requests. Once processed, the <strong>output table will contain new records</strong>, and the <strong>next script will trigger automatically</strong>.</p>
</section>
<section id="process-enrichment-data">
<h4>1.5.4 Process Enrichment Data<a class="headerlink" href="#process-enrichment-data" title="Link to this heading">¶</a></h4>
<p>A Python script is created for each client, integrating essential values such as <strong>MB_QA1, API keys</strong>, and secrets for initial setup. This script automates the generation of required components, allowing clients to set up jobs while enabling direct REST API calls, eliminating manual intervention.</p>
<p><strong>Enrichment Classes Optimization</strong></p>
<p>Optimizing enrichment classes by improving stage table performance and centralizing parameters for streamlined management.</p>
<ul class="simple">
<li><p><strong>Stage Table Optimization</strong>- Enhance the structure and performance of the stage table.</p></li>
<li><p><strong>Centralized Parameters</strong>- Consolidate and organize all parameters in a single location for efficient management.</p></li>
</ul>
<section id="optimization">
<h5><em>Optimization</em><a class="headerlink" href="#optimization" title="Link to this heading">¶</a></h5>
<p>To improve efficiency, the process focuses on enhancing the stage table’s structure and performance, centralizing parameters for better management, and implementing input merge updates to streamline data handling.</p>
<ul class="simple">
<li><p>Enhance the structure and performance of the stage table.</p></li>
<li><p>Centralize all parameters for better management.</p></li>
<li><p>Implement input merge updates for efficiency.</p></li>
</ul>
<figure class="align-default">
<img alt="_images/25.png" src="_images/25.png" />
</figure>
</section>
<section id="run-jobs">
<h5><em>Run Jobs</em><a class="headerlink" href="#run-jobs" title="Link to this heading">¶</a></h5>
<p>Go to the <strong>Procedure</strong> tab within the schema and select the <strong>Enrichment</strong> script.</p>
</section>
<section id="running-the-cleansematch-process">
<h5><em>Running the Cleansematch Process</em><a class="headerlink" href="#running-the-cleansematch-process" title="Link to this heading">¶</a></h5>
<p>The Cleansematch process is a crucial first step in data processing. It involves executing the script with the required arguments, validating configurations, and managing the Database and tables.</p>
<section id="initial-setup">
<h6>Initial Setup<a class="headerlink" href="#initial-setup" title="Link to this heading">¶</a></h6>
<ul class="simple">
<li><p>The <strong>Cleansematch</strong> process is mandatory and should be run first.</p></li>
<li><p>Execute the script with the required arguments.</p></li>
</ul>
<figure class="align-default">
<img alt="_images/26.png" src="_images/26.png" />
</figure>
</section>
<section id="configuration-and-validation">
<h6>Configuration and Validation<a class="headerlink" href="#configuration-and-validation" title="Link to this heading">¶</a></h6>
<ul class="simple">
<li><p>Verify that <strong>batch_size</strong> is between 1 and 50; otherwise, an error will be thrown.</p></li>
<li><p>Validate the <strong>delta_sharing_mode</strong> configuration parameter.</p></li>
<li><p>Ensure the <strong>share name</strong> matches the <strong>client_id</strong>.</p></li>
</ul>
</section>
<section id="database-and-table-management">
<h6>Database and Table Management<a class="headerlink" href="#database-and-table-management" title="Link to this heading">¶</a></h6>
<ul class="simple">
<li><p>If the <strong>Database</strong> does not exist, it will be created automatically.</p></li>
<li><p>If the <strong>destination_table</strong> is unavailable, clone the <strong>source_table</strong> and add a <strong>Status</strong> column, defaulting to <strong>NEW</strong>.</p></li>
</ul>
</section>
</section>
<section id="id1">
<h5><em>Process Enrichment Data</em><a class="headerlink" href="#id1" title="Link to this heading">¶</a></h5>
<p>If the delta_sharing_mode configuration parameter is provided, the system validates the provider using the delta_sharing_identifier. If a valid provider is not found, an error is thrown. When clients share data via delta sharing, they must ensure that the share name matches the client_id, as this is essential for identifying the correct share when multiple clients are involved. If there is a mismatch, an error will be triggered. Once the share is successfully identified, the system will automatically create the Database if it does not already exist.</p>
<p>If the <strong>destination_table</strong> (where the match output result will be stored) is not available:</p>
<ul class="simple">
<li><p>Clone the <strong>source table</strong>.</p></li>
<li><p>Add a new column called <strong>Status</strong> and set its value to <strong>NEW</strong>.</p></li>
<li><p>Set <strong>NEW</strong> as the default value so that all newly inserted records have this status.</p></li>
</ul>
<p>If the <strong>destination_table</strong> is available:</p>
<ul class="simple">
<li><p>Sync the <strong>source_table</strong> and <strong>destination_table</strong> using the primary key provided by the user. Match records and add any that do not exist in the destination_table.</p></li>
<li><p>Sync records with ERROR status that have been updated in the source_table, update them in the destination_table, and set their status to NEW for reprocessing.</p></li>
<li><p>During the syncing process, save the current UTC timestamp in the table as a checkpoint for future synchronization of records with ERROR status.</p></li>
</ul>
<p>For all records in the destination_table:</p>
<p>If a record is NEW and Tags is NULL or EMPTY, update Tags to NULL if it is EMPTY.</p>
<p>If the Tags parameter is provided, update records with the provided value in Tags.</p>
<p>If a record is not processed (Processed = False), it will be considered for CleanseMatch processing.</p>
<p>We will call the MatchEnrich API based on the batch_size value, processing data in chunks with parallelism determined by batch_size. After each chunk is processed, the results will be updated in the destination_table. At the end of the process, the Process Enrichment Data job will be triggered automatically, but only if there is data to be processed.</p>
</section>
</section>
</section>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          
          <a class="prev-page" href="index.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">Home</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2025, Hera Anjum
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">Introduction</a><ul>
<li><a class="reference internal" href="#user-guide">1. User Guide</a><ul>
<li><a class="reference internal" href="#log-in-to-snowflake">1.1 Log in to Snowflake</a></li>
<li><a class="reference internal" href="#access-snowflake-account-for-individual">1.2 Access Snowflake account for individual</a></li>
<li><a class="reference internal" href="#setting-up-the-database-and-schema">1.3 Setting Up the Database and Schema</a><ul>
<li><a class="reference internal" href="#creating-database-and-schema">Creating Database and Schema</a></li>
</ul>
</li>
<li><a class="reference internal" href="#creating-worksheets">1.4 Creating Worksheets</a><ul>
<li><a class="reference internal" href="#create-separate-worksheet">Create Separate worksheet</a></li>
<li><a class="reference internal" href="#configuring-database-and-schema">Configuring Database and Schema</a></li>
<li><a class="reference internal" href="#adding-source-data-assets">Adding source data assets</a></li>
</ul>
</li>
<li><a class="reference internal" href="#deploying-scripts-and-sharing-data-in-snowflake">1.5 Deploying Scripts and Sharing Data in Snowflake</a><ul>
<li><a class="reference internal" href="#managing-the-key-vault">1.5.1 Managing the key vault</a></li>
<li><a class="reference internal" href="#managing-auth-token">1.5.2 Managing Auth token</a></li>
<li><a class="reference internal" href="#retrieving-the-token-for-the-client">1.5.3 Retrieving the Token for the Client</a></li>
<li><a class="reference internal" href="#process-enrichment-data">1.5.4 Process Enrichment Data</a><ul>
<li><a class="reference internal" href="#optimization"><em>Optimization</em></a></li>
<li><a class="reference internal" href="#run-jobs"><em>Run Jobs</em></a></li>
<li><a class="reference internal" href="#running-the-cleansematch-process"><em>Running the Cleansematch Process</em></a><ul>
<li><a class="reference internal" href="#initial-setup">Initial Setup</a></li>
<li><a class="reference internal" href="#configuration-and-validation">Configuration and Validation</a></li>
<li><a class="reference internal" href="#database-and-table-management">Database and Table Management</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id1"><em>Process Enrichment Data</em></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script src="_static/documentation_options.js?v=5929fcd5"></script>
    <script src="_static/doctools.js?v=9bcbadda"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/scripts/furo.js?v=5fa4622c"></script>
    </body>
</html>